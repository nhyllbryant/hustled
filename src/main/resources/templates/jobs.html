<!-- src/main/resources/templates/jobs.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{fragments/layout :: layout(~{::body})}">
<body>
<div>
    <h2>Jobs</h2>
    <!--<div th:if="${#httpServletRequest.remoteUser != null}">-->
    <div th:if="${#authorization.expression('isAuthenticated()')}">
        <a th:href="@{/jobs/new}">+ New Job</a>
    </div>
    <table border="1" cellpadding="6" cellspacing="0">
        <thead>
        <tr>
            <th>Title</th><th>Company</th><th>Location</th><th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="job : ${jobs}">
            <td th:text="${job.title}">Title</td>
            <td th:text="${job.company}">Company</td>
            <td th:text="${job.location}">Location</td>
            <td>
                <a th:href="@{'/jobs/' + ${job.id}}">View</a>
                <!-- <span th:if="${#httpServletRequest.remoteUser != null}"> -->
                <span th:if="${#authorization.expression('isAuthenticated()')}">
                    | <a th:href="@{'/jobs/' + ${job.id} + '/edit'}">Edit</a>
                    | <form th:action="@{'/jobs/' + ${job.id} + '/delete'}" method="post" style="display:inline">
                        <button type="submit" onclick="return confirm('Delete this job?')">Delete</button>
                      </form>
                </span>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>
